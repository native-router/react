var ue=Object.defineProperty,le=Object.defineProperties;var de=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var J=(t,e,n)=>e in t?ue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,x=(t,e)=>{for(var n in e||(e={}))G.call(e,n)&&J(t,n,e[n]);if(E)for(var n of E(e))M.call(e,n)&&J(t,n,e[n]);return t},_=(t,e)=>le(t,de(e));var O=(t,e)=>{var n={};for(var r in t)G.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&E)for(var r of E(t))e.indexOf(r)<0&&M.call(t,r)&&(n[r]=t[r]);return n};import{j as S,r as i,m as fe,c as pe,a as me,b as he,J as xe,I as k,d as K}from"./vendor.3d96c833.js";const ve=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerpolicy&&(c.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?c.credentials="include":o.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}};ve();const be="modulepreload",W={},ge="/native-router-react/",P=function(e,n){return!n||n.length===0?e():Promise.all(n.map(r=>{if(r=`${ge}${r}`,r in W)return;W[r]=!0;const o=r.endsWith(".css"),c=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${c}`))return;const s=document.createElement("link");if(s.rel=o?"stylesheet":be,o||(s.as="script",s.crossOrigin=""),s.href=r,document.head.appendChild(s),o)return new Promise((l,d)=>{s.addEventListener("load",l),s.addEventListener("error",d)})})).then(()=>e())};let _e=1;function V(){return _e++}function z(){return new Promise(()=>{})}function Ce(){let t;return[function(n){const r=V();return t=r,n.then(o=>t===r?o:z()).catch(o=>t===r?Promise.reject(o):z())},function(){t=void 0}]}const a=S.exports.jsx,y=S.exports.jsxs,Pe=S.exports.Fragment,Q=i.exports.createContext(null);function X(t){return a(Q.Provider,x({},t))}function Ee(){return i.exports.useContext(Q)}function w(){const t=Ee();return a(Pe,{children:t})}const Y=i.exports.createContext([void 0,{}]);function Z(){return i.exports.useContext(Y)}function ke(){return Z()[1]}function ye({children:t,name:e,data:n}){const r=ke();return a(Y.Provider,{value:[n,e?_(x({},r),{[e]:n}):r],children:t})}function Fe(t){const[e,n]=Z();return t?n[t]:e}function we(t,e={}){return{routes:Array.isArray(t)?t:[t],baseUrl:e.baseUrl||"",options:e}}function Re(t,e){function n(r,o,c){for(let s=0;s<r.length;s++){const l=r[s],d=!l.children,f=l.path?fe(l.path,{strict:!0,sensitive:!0,decode:typeof decodeURIComponent=="function"?decodeURIComponent:void 0,end:d})(c):{path:"",index:0,params:{}};if(f){const v=x({route:l},f);if(d)return[v];const p=n(l.children,`${o}${l.path||""}`,c.slice(f.path.length));return p?[v,...p]:void 0}}}return n(t.routes,t.baseUrl,e.slice(t.baseUrl.length))}function je(t,e,n){const r=Re(t,e);return r?Promise.all(r.map(({params:o,route:c},s)=>{var f;const l={matched:r,index:s,router:t,pathname:e,location:n};function d(){if(!c.component)return w;const v=c.component(o,l);return Promise.resolve(v).then(p=>"default"in p?p.default:p)}return Promise.all([(f=c.data)==null?void 0:f.call(c,o,l),d()]).then(([v,p])=>a(ye,{data:v,name:c.name,children:a(p,{})}))})).then(o=>o.reverse().reduce((c,s)=>a(X,{value:c,children:s}))):Promise.reject(new Error("Not Found"))}const A=i.exports.createContext(null),[Le,Ie]=Ce();function U({routes:t,history:e,children:n,errorHandler:r=Promise.reject,baseUrl:o,resolve:c=je}){const s=i.exports.useRef();s.current=we(t,{baseUrl:o});const[l,d]=i.exports.useState(),[f,v]=i.exports.useState(),p=i.exports.useRef([]),C=i.exports.useRef([e.location]),R=i.exports.useCallback(()=>{d(u=>{if(u&&u.status==="pending"){Ie();return}return u})},[]),N=u=>m=>{throw d({key:u,status:"rejected"}),m},$=i.exports.useCallback((u,{state:m,replace:h,done:b,onError:g}={})=>{const F=s.current;u=F.baseUrl+u;const L=_(x({pathname:"",search:"",hash:""},xe(u)),{state:m}),B=c(F,L.pathname,L).catch(r);return B.then(b,g),function(){var q;const I=(((q=e.location.state)==null?void 0:q.index)||0)+(h?0:1),D=V();d({key:D,status:"pending"}),Le(B).then(ae=>{C.current=[...C.current.slice(0,I),L],p.current=[...p.current.slice(0,I),ae],e[h?"replace":"push"](u,{index:I,locationStack:C.current}),d({key:D,status:"resolved"})}).catch(N(D))}},[]),j=i.exports.useCallback((u,m)=>{$(u,m)()},[]),re=i.exports.useCallback(()=>{const u=s.current,g=e.location,{pathname:m,state:h}=g,b=O(g,["pathname","state"]);return j(k(_(x({},b),{pathname:m.slice(u.baseUrl.length)})),{replace:!0,state:C.current[h.index].state})},[j]),oe=i.exports.useCallback(u=>{e.go(u)},[]),ce=i.exports.useCallback(()=>{e.back()},[]),se=i.exports.useCallback(()=>{e.forward()},[]),ie=i.exports.useCallback(u=>s.current.baseUrl+e.createHref(u),[]);return i.exports.useEffect(()=>{var b;const u=s.current,m=((b=e.location.state)==null?void 0:b.locationStack)||C.current;C.current=m;const h=V();return d({key:h,status:"pending"}),Promise.all(m.map(g=>c(u,k(g),g).catch(r))).then(g=>{p.current=g,e.replace(k(e.location),e.location.state),d({key:h,status:"resolved"})}).catch(N(h)),R},[]),i.exports.useEffect(()=>e.listen(({action:u,location:m})=>{var b;R();const h=((b=m.state)==null?void 0:b.index)||0;v(p.current[h]),u==="POP"&&e.replace(k(e.location),_(x({},e.location.state),{locationStack:C.current}))}),[e]),a(A.Provider,{value:{go:oe,back:ce,forward:se,createHref:ie,loading:l,setLoading:d,setView:v,prefetch:$,navigate:j,refresh:re,cancel:R},children:typeof n=="undefined"?f:a(X,{value:f,children:n})})}function De(t){const e=pe();return a(U,_(x({},t),{history:e}))}function Oe(t){const e=me();return a(U,_(x({},t),{history:e}))}function Se(r){var o=r,{initialEntries:t,initialIndex:e}=o,n=O(o,["initialEntries","initialIndex"]);const c=he({initialEntries:t,initialIndex:e});return a(U,_(x({},n),{history:c}))}function ee(){return i.exports.useContext(A)}function Ve(){return i.exports.useContext(A).loading}function H(){const{cancel:t}=ee(),[e,n]=i.exports.useState(0),r=i.exports.useMemo(()=>document.createElement("div"),[]),o=Ve(),{key:c,status:s}=o||{};return i.exports.useEffect(()=>{n(0)},[c]),i.exports.useEffect(()=>{const l=()=>{r.parentElement&&document.body.removeChild(r)};if(s===void 0)l();else if(s==="pending"){l(),document.body.appendChild(r);const d=setInterval(()=>{n(f=>f>=80?f:f+30)},500);return()=>clearInterval(d)}else if(s==="resolved"){n(100);const d=setTimeout(l,500);return()=>{clearTimeout(d),l()}}},[s]),K.exports.createPortal(a("button",{"data-testid":"loading",type:"button",title:"Click to cancel!",onClick:t,className:"b1dll0lj",children:e?a("div",{style:{width:`${e}%`},className:"dvnac7k"}):null}),r)}function T({error:t}){const{refresh:e}=ee();return y("section",{children:[a("h1",{children:"Error"}),a("pre",{children:t.stack}),a("button",{type:"button",onClick:e,children:"Refresh"})]})}function te(t){return new Promise(e=>{setTimeout(e,t)})}const ne=[{id:1,username:"user 1",description:"..."},{id:2,username:"user 2",description:"..."}];async function Ae(){return await te(3e3),ne}async function Ue(t){if(await te(3e3),t>2)throw new Error("Not Found");return ne.find(e=>e.id===t)}function He(){const t=window.location.search.slice(1),e={component:()=>P(()=>import("./index.b1fb3312.js"),["assets/index.b1fb3312.js","assets/index.ebf4e2dd.css","assets/vendor.3d96c833.js"]),children:[{path:"/",component:()=>P(()=>import("./index.4c91beb0.js"),["assets/index.4c91beb0.js","assets/index.04ec1ac7.css","assets/vendor.3d96c833.js"])},{path:"/users",component:()=>P(()=>import("./index.6b3bfd77.js"),["assets/index.6b3bfd77.js","assets/index.e0d4e456.css","assets/vendor.3d96c833.js"]),data:Ae},{path:"/users/:id",component:()=>P(()=>import("./index.1dc4c451.js"),["assets/index.1dc4c451.js","assets/index.d2976a17.css","assets/vendor.3d96c833.js"]),data:({id:n})=>Ue(+n)},{path:"/help",component:()=>P(()=>import("./index.8501f0d1.js"),["assets/index.8501f0d1.js","assets/index.ba0ba40f.css","assets/vendor.3d96c833.js"])},{path:"/about",component:()=>P(()=>import("./index.ac107ded.js"),["assets/index.ac107ded.js","assets/index.c2fbffe4.css","assets/vendor.3d96c833.js"])}]};return t==="hash"?y(Oe,{routes:e,errorHandler:n=>a(T,{error:n}),children:[a(w,{}),a(H,{})]}):t==="memory"?y(Se,{initialEntries:["/"],routes:e,errorHandler:n=>a(T,{error:n}),children:[a(w,{}),a(H,{})]}):y(De,{routes:e,baseUrl:"/native-router-react/".slice(0,-1),errorHandler:n=>a(T,{error:n}),children:[a(w,{}),a(H,{})]})}K.exports.render(a(He,{}),document.getElementById("root"));export{w as V,y as a,Fe as b,a as j,ee as u};
