var ie=Object.defineProperty,ae=Object.defineProperties;var ue=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var z=(t,e,n)=>e in t?ie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,x=(t,e)=>{for(var n in e||(e={}))G.call(e,n)&&z(t,n,e[n]);if(C)for(var n of C(e))M.call(e,n)&&z(t,n,e[n]);return t},_=(t,e)=>ae(t,ue(e));var O=(t,e)=>{var n={};for(var r in t)G.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&C)for(var r of C(t))e.indexOf(r)<0&&M.call(t,r)&&(n[r]=t[r]);return n};import{j as S,r as a,m as le,c as de,a as fe,b as pe,J as me,I as E,d as J,e as K}from"./vendor.717894df.js";const he=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}};he();const xe="modulepreload",W={},ve="/native-router-react/",y=function(e,n){return!n||n.length===0?e():Promise.all(n.map(r=>{if(r=`${ve}${r}`,r in W)return;W[r]=!0;const o=r.endsWith(".css"),s=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${s}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":xe,o||(c.as="script",c.crossOrigin=""),c.href=r,document.head.appendChild(c),o)return new Promise((l,d)=>{c.addEventListener("load",l),c.addEventListener("error",d)})})).then(()=>e())};let ge=1;function V(){return ge++}function Q(){return new Promise(()=>{})}function be(){let t;return[function(n){const r=V();return t=r,n.then(o=>t===r?o:Q()).catch(o=>t===r?Promise.reject(o):Q())},function(){t=void 0}]}const i=S.exports.jsx,w=S.exports.jsxs,_e=S.exports.Fragment,X=a.exports.createContext(null);function Y(t){return i(X.Provider,x({},t))}function Pe(){return a.exports.useContext(X)}function R(){const t=Pe();return i(_e,{children:t})}const Z=a.exports.createContext([void 0,{}]);function ee(){return a.exports.useContext(Z)}function ye(){return ee()[1]}function Ce({children:t,name:e,data:n}){const r=ye();return i(Z.Provider,{value:[n,e?_(x({},r),{[e]:n}):r],children:t})}function Ne(t){const[e,n]=ee();return t?n[t]:e}function Ee(t,e={}){return{routes:Array.isArray(t)?t:[t],baseUrl:e.baseUrl||"",options:e}}function we(t,e){function n(r,o,s){for(let c=0;c<r.length;c++){const l=r[c],d=!l.children,f=l.path?le(l.path,{strict:!0,sensitive:!0,decode:typeof decodeURIComponent=="function"?decodeURIComponent:void 0,end:d})(s):{path:"",index:0,params:{}};if(f){const v=x({route:l},f);if(d)return[v];const p=n(l.children,`${o}${l.path||""}`,s.slice(f.path.length));return p?[v,...p]:void 0}}}return n(t.routes,t.baseUrl,e.slice(t.baseUrl.length))}function Re(t,e,n){const r=we(t,e);return r?Promise.all(r.map(({params:o,route:s},c)=>{var f;const l={matched:r,index:c,router:t,pathname:e,location:n};function d(){if(!s.component)return R;const v=s.component(o,l);return Promise.resolve(v).then(p=>"default"in p?p.default:p)}return Promise.all([(f=s.data)==null?void 0:f.call(s,o,l),d()]).then(([v,p])=>i(Ce,{data:v,name:s.name,children:i(p,{})}))})).then(o=>o.reverse().reduce((s,c)=>i(Y,{value:s,children:c}))):Promise.reject(new Error("Not Found"))}const A=a.exports.createContext(null),[ke,je]=be();function U({routes:t,history:e,children:n,errorHandler:r=Promise.reject,baseUrl:o,resolve:s=Re}){const c=a.exports.useRef();c.current=Ee(t,{baseUrl:o});const[l,d]=a.exports.useState(),[f,v]=a.exports.useState(),p=a.exports.useRef([]),P=a.exports.useRef([e.location]),k=a.exports.useCallback(()=>{d(u=>{if(u&&u.status==="pending"){je();return}return u})},[]),N=u=>m=>{throw d({key:u,status:"rejected"}),m},$=a.exports.useCallback((u,{state:m,replace:h,done:g,onError:b}={})=>{const F=c.current;u=F.baseUrl+u;const L=_(x({pathname:"",search:"",hash:""},me(u)),{state:m}),B=s(F,L.pathname,L).catch(r);return B.then(g,b),function(){var q;const I=(((q=e.location.state)==null?void 0:q.index)||0)+(h?0:1),D=V();d({key:D,status:"pending"}),ke(B).then(ce=>{P.current=[...P.current.slice(0,I),L],p.current=[...p.current.slice(0,I),ce],e[h?"replace":"push"](u,{index:I,locationStack:P.current}),d({key:D,status:"resolved"})}).catch(N(D))}},[]),j=a.exports.useCallback((u,m)=>{$(u,m)()},[]),oe=a.exports.useCallback(()=>{const u=c.current,b=e.location,{pathname:m,state:h}=b,g=O(b,["pathname","state"]);return j(E(_(x({},g),{pathname:m.slice(u.baseUrl.length)})),{replace:!0,state:P.current[h.index].state})},[j]),se=a.exports.useCallback(u=>c.current.baseUrl+e.createHref(u),[]);return a.exports.useEffect(()=>{var g;const u=c.current,m=((g=e.location.state)==null?void 0:g.locationStack)||P.current;P.current=m;const h=V();return d({key:h,status:"pending"}),Promise.all(m.map(b=>s(u,E(b),b).catch(r))).then(b=>{p.current=b,e.replace(E(e.location),e.location.state),d({key:h,status:"resolved"})}).catch(N(h)),k},[]),a.exports.useEffect(()=>e.listen(({action:u,location:m})=>{var g;k();const h=((g=m.state)==null?void 0:g.index)||0;v(p.current[h]),u==="POP"&&e.replace(E(e.location),_(x({},e.location.state),{locationStack:P.current}))}),[e]),i(A.Provider,{value:{history:e,createHref:se,loading:l,setLoading:d,setView:v,prefetch:$,navigate:j,refresh:oe,cancel:k},children:typeof n=="undefined"?f:i(Y,{value:f,children:n})})}function Le(t){const e=de();return i(U,_(x({},t),{history:e}))}function Ie(t){const e=fe();return i(U,_(x({},t),{history:e}))}function De(r){var o=r,{initialEntries:t,initialIndex:e}=o,n=O(o,["initialEntries","initialIndex"]);const s=pe({initialEntries:t,initialIndex:e});return i(U,_(x({},n),{history:s}))}function te(){return a.exports.useContext(A)}function Oe(){return a.exports.useContext(A).loading}function H(){const{cancel:t}=te(),[e,n]=a.exports.useState(0),r=a.exports.useMemo(()=>document.createElement("div"),[]),o=Oe(),{key:s,status:c}=o||{};return a.exports.useEffect(()=>{n(0)},[s]),a.exports.useEffect(()=>{const l=()=>{r.parentElement&&document.body.removeChild(r)};if(c===void 0)l();else if(c==="pending"){l(),document.body.appendChild(r);const d=setInterval(()=>{n(f=>f>=80?f:f+30)},500);return()=>clearInterval(d)}else if(c==="resolved"){n(100);const d=setTimeout(l,500);return()=>{clearTimeout(d),l()}}},[c]),J.exports.createPortal(i("button",{"data-testid":"loading",type:"button",title:"Click to cancel!",onClick:t,className:K`
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        height: 12px;
        z-index: 1000;
        background-color: rgba(0, 0, 0, 0.5);
        display: flex;
        align-items: center;
        overflow: hidden;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
        width: 100vw;
        border: none;
        border-radius: 8px;
        padding: 0;

        &:hover {
          height: 24px;
        }
      `,children:e?i("div",{style:{width:`${e}%`},className:K`
            transition: width 0.5s;
            background: #ffa8b6;
            height: 100%;
            border-radius: 8px;
          `}):null}),r)}function T({error:t}){const{refresh:e}=te();return w("section",{children:[i("h1",{children:"Error"}),i("pre",{children:t.stack}),i("button",{type:"button",onClick:e,children:"Refresh"})]})}function ne(t){return new Promise(e=>{setTimeout(e,t)})}const re=[{id:1,username:"user 1",description:"..."},{id:2,username:"user 2",description:"..."}];async function Se(){return await ne(3e3),re}async function Ve(t){if(await ne(3e3),t>2)throw new Error("Not Found");return re.find(e=>e.id===t)}function Ae(){const t=window.location.search.slice(1),e={component:()=>y(()=>import("./index.7f695e66.js"),["assets/index.7f695e66.js","assets/vendor.717894df.js"]),children:[{path:"/",component:()=>y(()=>import("./index.8304880c.js"),["assets/index.8304880c.js","assets/vendor.717894df.js"])},{path:"/users",component:()=>y(()=>import("./index.722cae3b.js"),["assets/index.722cae3b.js","assets/vendor.717894df.js"]),data:Se},{path:"/users/:id",component:()=>y(()=>import("./index.ebc6943b.js"),["assets/index.ebc6943b.js","assets/vendor.717894df.js"]),data:({id:n})=>Ve(+n)},{path:"/help",component:()=>y(()=>import("./index.779e44d4.js"),["assets/index.779e44d4.js","assets/vendor.717894df.js"])},{path:"/about",component:()=>y(()=>import("./index.a593fb5a.js"),["assets/index.a593fb5a.js","assets/vendor.717894df.js"])}]};return t==="hash"?w(Ie,{routes:e,errorHandler:n=>i(T,{error:n}),children:[i(R,{}),i(H,{})]}):t==="memory"?w(De,{initialEntries:["/"],routes:e,errorHandler:n=>i(T,{error:n}),children:[i(R,{}),i(H,{})]}):w(Le,{routes:e,baseUrl:"/native-router-react/".slice(0,-1),errorHandler:n=>i(T,{error:n}),children:[i(R,{}),i(H,{})]})}J.exports.render(i(Ae,{}),document.getElementById("root"));export{R as V,w as a,Ne as b,i as j,te as u};
