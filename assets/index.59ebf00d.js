var q=Object.defineProperty,J=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var I=(e,t,n)=>t in e?q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,h=(e,t)=>{for(var n in t||(t={}))R.call(t,n)&&I(e,n,t[n]);if(v)for(var n of v(t))V.call(t,n)&&I(e,n,t[n]);return e},m=(e,t)=>J(e,K(t));var C=(e,t)=>{var n={};for(var r in e)R.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&v)for(var r of v(e))t.indexOf(r)<0&&V.call(e,r)&&(n[r]=e[r]);return n};import{j as P,r as l,J as W,m as z,I as D,c as Q,a as X,b as Y,d as O}from"./vendor.99e26b64.js";const Z=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerpolicy&&(c.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?c.credentials="include":o.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}};Z();const ee="modulepreload",A={},te="/native-router-react/",p=function(t,n){return!n||n.length===0?t():Promise.all(n.map(r=>{if(r=`${te}${r}`,r in A)return;A[r]=!0;const o=r.endsWith(".css"),c=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${c}`))return;const i=document.createElement("link");if(i.rel=o?"stylesheet":ee,o||(i.as="script",i.crossOrigin=""),i.href=r,document.head.appendChild(i),o)return new Promise((s,u)=>{i.addEventListener("load",s),i.addEventListener("error",u)})})).then(()=>t())},a=P.exports.jsx,y=P.exports.jsxs,ne=P.exports.Fragment;function re(...e){const t=l.exports.createContext(void 0),n=l.exports.createContext(void 0);function r({children:o}){const[c,i]=l.exports.useState(...e);return a(n.Provider,{value:i,children:a(t.Provider,{value:c,children:o})})}return{SetterContext:n,ValueContext:t,Provider:r}}function oe(e){return l.exports.useContext(e.ValueContext)}function ce(e){return l.exports.useContext(e.SetterContext)}const H=l.exports.createContext(null);function T(e){return a(H.Provider,h({},e))}function ie(){return l.exports.useContext(H)}function g(){const e=ie();return a(ne,{children:e})}const N=l.exports.createContext([void 0,{}]);function U(){return l.exports.useContext(N)}function se(){return U()[1]}function ae({children:e,name:t,data:n}){const r=se();return a(N.Provider,{value:[n,t?m(h({},r),{[t]:n}):r],children:e})}function De(e){const[t,n]=U();return e?n[e]:t}const w=re();function ue(){return oe(w)}function le(){return ce(w)}let de=1;function $(){return de++}function x(){}function B(){return new Promise(x)}function fe(){let e;return[function(n){const r=$();return e=r,n.then(o=>e===r?o:B()).catch(o=>e===r?Promise.reject(o):B())},function(){e=void 0}]}function he(e,t,n,r){const[o,c]=fe();return m(h({routes:Array.isArray(e)?e:[e],resolveView:n,history:t,locationStack:[],viewStack:[],currentGuard:o,cancelAll:c},r),{baseUrl:(r==null?void 0:r.baseUrl)||""})}function me(e,t){function n(r,o,c){for(let i=0;i<r.length;i++){const s=r[i],u=!s.children,d=s.path?z(s.path,{strict:!0,sensitive:!0,decode:typeof decodeURIComponent=="function"?decodeURIComponent:void 0,end:u})(c):{path:"",index:0,params:{}};if(d){const f=h({route:s},d);if(u)return[f];const j=n(s.children,`${o}${s.path||""}`,c.slice(d.path.length));return j?[f,...j]:void 0}}}return n(e.routes,e.baseUrl,t.slice(e.baseUrl.length))}function pe(e,t,n){const{baseUrl:r}=e;return m(h({pathname:"",search:"",hash:""},W(r+t)),{state:n})}function _(e,t){const n=me(e,t.pathname);if(!n)return Promise.reject(new Error("Not Found"));const{resolveView:r}=e;return r(n,{router:e,location:t}).catch(e.errorHandler)}function xe(e,t,n){var s;const{history:r,currentGuard:o,onLoadingChange:c=x}=e,i=(((s=r.location.state)==null?void 0:s.index)||0)+1;return e.resolving&&c(),e.resolving=n,c("pending"),o(t).then(u=>{e.locationStack=[...e.locationStack.slice(0,i),n],e.viewStack=[...e.viewStack.slice(0,i),u],r.push(n,{index:i,locationStack:e.locationStack}),c("resolved")}).catch(u=>{throw c("rejected"),u})}function ve(e,t,n){var s;const{history:r,currentGuard:o,onLoadingChange:c=x}=e,i=((s=r.location.state)==null?void 0:s.index)||0;return e.resolving&&c(),e.resolving=n,c("pending"),o(t).then(u=>{e.locationStack[i]=n,e.viewStack[i]=u,r.replace(n,{index:i,locationStack:e.locationStack}),c("resolved")}).catch(u=>{throw c("rejected"),u})}function ye(e,t,n){const r=pe(e,t,n),o=_(e,r);return xe(e,o,r)}function ge(e){const{location:t}=e.history,n=_(e,t);return ve(e,n,t)}function Ce({baseUrl:e,history:t},n){return e+t.createHref(n)}function k({cancelAll:e,onLoadingChange:t=x}){e(),t()}function Pe(e,t){var i;const{onLoadingChange:n=x,history:r}=e,o=((i=r.location.state)==null?void 0:i.locationStack)||[r.location];e.locationStack=o,n("pending"),Promise.all(o.map(s=>_(e,s))).then(s=>{e.viewStack=s,r.replace(D(r.location),r.location.state),n("resolved")}).catch(s=>{throw n("rejected"),s});const c=r.listen(({action:s,location:u})=>{var f;k(e);const d=((f=u.state)==null?void 0:f.index)||0;t(e.viewStack[d]),s==="POP"&&r.replace(D(r.location),m(h({},r.location.state),{locationStack:e.locationStack}))});return()=>{k(e),c()}}function we(e,{router:t,location:n}){return Promise.all(e.map(({params:r,route:o},c)=>{var u;const i={matched:e,index:c,router:t,location:n};function s(){if(!o.component)return g;const d=o.component(r,i);return Promise.resolve(d).then(f=>"default"in f?f.default:f)}return Promise.all([(u=o.data)==null?void 0:u.call(o,r,i),s()]).then(([d,f])=>a(ae,{data:d,name:o.name,children:a(f,{})}))})).then(r=>r.reverse().reduce((o,c)=>a(T,{value:o,children:c})))}const F=l.exports.createContext(null);function _e({routes:e,history:t,children:n,errorHandler:r=Promise.reject,baseUrl:o,resolveView:c=we}){const i=le(),s=l.exports.useMemo(()=>he(e,t,c,{baseUrl:o,errorHandler:r,onLoadingChange(f){i(f&&{key:$(),status:f})}}),[e,t,c,o,r]),[u,d]=l.exports.useState();return l.exports.useEffect(()=>Pe(s,d),[s]),a(F.Provider,{value:s,children:typeof n=="undefined"?u:a(T,{value:u,children:n})})}function S(e){return a(w.Provider,{children:a(_e,h({},e))})}function ke(e){const t=Q();return a(S,m(h({},e),{history:t}))}function Se(e){const t=X();return a(S,m(h({},e),{history:t}))}function Le(r){var o=r,{initialEntries:e,initialIndex:t}=o,n=C(o,["initialEntries","initialIndex"]);const c=Y({initialEntries:e,initialIndex:t});return a(S,m(h({},n),{history:c}))}function L(){return l.exports.useContext(F)}function Ee(n){var r=n,{to:e}=r,t=C(r,["to"]);const o=L();function c(i){i.preventDefault(),ye(o,e)}return a("a",m(h({},t),{href:Ce(o,e),onClick:c}))}function E(){const e=L(),[t,n]=l.exports.useState(0),r=l.exports.useMemo(()=>document.createElement("div"),[]),o=ue(),{key:c,status:i}=o||{};return l.exports.useEffect(()=>{n(0)},[c]),l.exports.useEffect(()=>{const s=()=>{r.parentElement&&document.body.removeChild(r)};if(i===void 0)s();else if(i==="pending"){s(),document.body.appendChild(r);const u=setInterval(()=>{n(d=>d>=80?d:d+30)},500);return()=>clearInterval(u)}else if(i==="resolved"){n(100);const u=setTimeout(s,500);return()=>{clearTimeout(u),s()}}},[i]),O.exports.createPortal(a("button",{"data-testid":"loading",type:"button",title:"Click to cancel!",onClick:()=>k(e),className:"b1dll0lj",children:t?a("div",{style:{width:`${t}%`},className:"dvnac7k"}):null}),r)}function b({error:e}){const t=L();return y("section",{children:[a("h1",{children:"Error"}),a("pre",{children:e.stack}),a("button",{type:"button",onClick:()=>ge(t),children:"Refresh"}),a(Ee,{to:"/",children:"home"})]})}function G(e){return new Promise(t=>{setTimeout(t,e)})}const M=[{id:1,username:"user 1",description:"..."},{id:2,username:"user 2",description:"..."}];async function be(){return console.log("fetch list start"),await G(3e3),console.log("fetch list done"),M}async function je(e){if(console.log("fetch by id start"),await G(3e3),console.log("fetch by id done"),e>2)throw new Error("Not Found");return M.find(t=>t.id===e)}function Re(){const e=window.location.search.slice(1),t={component:()=>p(()=>import("./index.b8120404.js"),["assets/index.b8120404.js","assets/index.ebf4e2dd.css","assets/vendor.99e26b64.js"]),children:[{path:"/",component:()=>p(()=>import("./index.f087b5c7.js"),["assets/index.f087b5c7.js","assets/index.04ec1ac7.css","assets/vendor.99e26b64.js"])},{path:"/users",component:()=>p(()=>import("./index.8e74d313.js"),["assets/index.8e74d313.js","assets/index.358e9db0.css","assets/vendor.99e26b64.js"]),data:be},{path:"/users/:id",component:()=>p(()=>import("./index.6bdb3c26.js"),["assets/index.6bdb3c26.js","assets/index.d2976a17.css","assets/vendor.99e26b64.js"]),data:({id:n})=>je(+n)},{path:"/help",component:()=>p(()=>import("./index.823e0c57.js"),["assets/index.823e0c57.js","assets/index.ba0ba40f.css","assets/vendor.99e26b64.js"])},{path:"/about",component:()=>p(()=>import("./index.90b884dc.js"),["assets/index.90b884dc.js","assets/index.c2fbffe4.css","assets/vendor.99e26b64.js"])}]};return e==="hash"?y(Se,{routes:t,errorHandler:n=>a(b,{error:n}),children:[a(g,{}),a(E,{})]}):e==="memory"?y(Le,{initialEntries:["/"],routes:t,errorHandler:n=>a(b,{error:n}),children:[a(g,{}),a(E,{})]}):y(ke,{routes:t,baseUrl:"/native-router-react/".slice(0,-1),errorHandler:n=>a(b,{error:n}),children:[a(g,{}),a(E,{})]})}O.exports.render(a(Re,{}),document.getElementById("root"));export{Ee as L,g as V,a,xe as b,Ce as c,De as d,y as j,_ as r,pe as t,L as u};
