var se=Object.defineProperty,ie=Object.defineProperties;var ae=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var J=(t,e,n)=>e in t?se(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,x=(t,e)=>{for(var n in e||(e={}))G.call(e,n)&&J(t,n,e[n]);if(E)for(var n of E(e))M.call(e,n)&&J(t,n,e[n]);return t},P=(t,e)=>ie(t,ae(e));var O=(t,e)=>{var n={};for(var r in t)G.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&E)for(var r of E(t))e.indexOf(r)<0&&M.call(t,r)&&(n[r]=t[r]);return n};import{j as S,r as a,m as ue,c as le,a as de,b as fe,J as pe,I as y,d as K}from"./vendor.3d96c833.js";const me=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerpolicy&&(c.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?c.credentials="include":o.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}};me();const he="modulepreload",W={},xe="/native-router-react/",C=function(e,n){return!n||n.length===0?e():Promise.all(n.map(r=>{if(r=`${xe}${r}`,r in W)return;W[r]=!0;const o=r.endsWith(".css"),c=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${c}`))return;const s=document.createElement("link");if(s.rel=o?"stylesheet":he,o||(s.as="script",s.crossOrigin=""),s.href=r,document.head.appendChild(s),o)return new Promise((l,d)=>{s.addEventListener("load",l),s.addEventListener("error",d)})})).then(()=>e())};let ve=1;function V(){return ve++}function z(){return new Promise(()=>{})}function _e(){let t;return[function(n){const r=V();return t=r,n.then(o=>t===r?o:z()).catch(o=>t===r?Promise.reject(o):z())},function(){t=void 0}]}const i=S.exports.jsx,R=S.exports.jsxs,ge=S.exports.Fragment,Q=a.exports.createContext(null);function X(t){return i(Q.Provider,x({},t))}function Pe(){return a.exports.useContext(Q)}function k(){const t=Pe();return i(ge,{children:t})}const Y=a.exports.createContext([void 0,{}]);function Z(){return a.exports.useContext(Y)}function be(){return Z()[1]}function Ce({children:t,name:e,data:n}){const r=be();return i(Y.Provider,{value:[n,e?P(x({},r),{[e]:n}):r],children:t})}function Te(t){const[e,n]=Z();return t?n[t]:e}function Ee(t,e={}){return{routes:Array.isArray(t)?t:[t],baseUrl:e.baseUrl||"",options:e}}function ye(t,e){function n(r,o,c){for(let s=0;s<r.length;s++){const l=r[s],d=!l.children,f=l.path?ue(l.path,{strict:!0,sensitive:!0,decode:typeof decodeURIComponent=="function"?decodeURIComponent:void 0,end:d})(c):{path:"",index:0,params:{}};if(f){const v=x({route:l},f);if(d)return[v];const p=n(l.children,`${o}${l.path||""}`,c.slice(f.path.length));return p?[v,...p]:void 0}}}return n(t.routes,t.baseUrl,e.slice(t.baseUrl.length))}function Re(t,e,n){const r=ye(t,e);return r?Promise.all(r.map(({params:o,route:c},s)=>{var f;const l={matched:r,index:s,router:t,pathname:e,location:n};function d(){if(!c.component)return k;const v=c.component(o,l);return Promise.resolve(v).then(p=>"default"in p?p.default:p)}return Promise.all([(f=c.data)==null?void 0:f.call(c,o,l),d()]).then(([v,p])=>i(Ce,{data:v,name:c.name,children:i(p,{})}))})).then(o=>o.reverse().reduce((c,s)=>i(X,{value:c,children:s}))):Promise.reject(new Error("Not Found"))}const A=a.exports.createContext(null),[ke,we]=_e();function U({routes:t,history:e,children:n,errorHandler:r=Promise.reject,baseUrl:o,resolve:c=Re}){const s=a.exports.useRef();s.current=Ee(t,{baseUrl:o});const[l,d]=a.exports.useState(),[f,v]=a.exports.useState(),p=a.exports.useRef([]),b=a.exports.useRef([e.location]),w=a.exports.useCallback(()=>{d(u=>{if(u&&u.status==="pending"){we();return}return u})},[]),N=u=>m=>{throw d({key:u,status:"rejected"}),m},$=a.exports.useCallback((u,{state:m,replace:h,done:_,onError:g}={})=>{const F=s.current;u=F.baseUrl+u;const L=P(x({pathname:"",search:"",hash:""},pe(u)),{state:m}),B=c(F,L.pathname,L).catch(r);return B.then(_,g),function(){var q;const I=(((q=e.location.state)==null?void 0:q.index)||0)+(h?0:1),D=V();d({key:D,status:"pending"}),ke(B).then(ce=>{b.current=[...b.current.slice(0,I),L],p.current=[...p.current.slice(0,I),ce],e[h?"replace":"push"](u,{index:I,locationStack:b.current}),d({key:D,status:"resolved"})}).catch(N(D))}},[]),j=a.exports.useCallback((u,m)=>{$(u,m)()},[]),re=a.exports.useCallback(()=>{const u=s.current,g=e.location,{pathname:m,state:h}=g,_=O(g,["pathname","state"]);return j(y(P(x({},_),{pathname:m.slice(u.baseUrl.length)})),{replace:!0,state:b.current[h.index].state})},[j]),oe=a.exports.useCallback(u=>s.current.baseUrl+e.createHref(u),[]);return a.exports.useEffect(()=>{var _;const u=s.current,m=((_=e.location.state)==null?void 0:_.locationStack)||b.current;b.current=m;const h=V();return d({key:h,status:"pending"}),Promise.all(m.map(g=>c(u,y(g),g).catch(r))).then(g=>{p.current=g,e.replace(y(e.location),e.location.state),d({key:h,status:"resolved"})}).catch(N(h)),w},[]),a.exports.useEffect(()=>e.listen(({action:u,location:m})=>{var _;w();const h=((_=m.state)==null?void 0:_.index)||0;v(p.current[h]),u==="POP"&&e.replace(y(e.location),P(x({},e.location.state),{locationStack:b.current}))}),[e]),i(A.Provider,{value:{history:e,createHref:oe,loading:l,setLoading:d,setView:v,prefetch:$,navigate:j,refresh:re,cancel:w},children:typeof n=="undefined"?f:i(X,{value:f,children:n})})}function je(t){const e=le();return i(U,P(x({},t),{history:e}))}function Le(t){const e=de();return i(U,P(x({},t),{history:e}))}function Ie(r){var o=r,{initialEntries:t,initialIndex:e}=o,n=O(o,["initialEntries","initialIndex"]);const c=fe({initialEntries:t,initialIndex:e});return i(U,P(x({},n),{history:c}))}function ee(){return a.exports.useContext(A)}function De(){return a.exports.useContext(A).loading}function H(){const{cancel:t}=ee(),[e,n]=a.exports.useState(0),r=a.exports.useMemo(()=>document.createElement("div"),[]),o=De(),{key:c,status:s}=o||{};return a.exports.useEffect(()=>{n(0)},[c]),a.exports.useEffect(()=>{const l=()=>{r.parentElement&&document.body.removeChild(r)};if(s===void 0)l();else if(s==="pending"){l(),document.body.appendChild(r);const d=setInterval(()=>{n(f=>f>=80?f:f+30)},500);return()=>clearInterval(d)}else if(s==="resolved"){n(100);const d=setTimeout(l,500);return()=>{clearTimeout(d),l()}}},[s]),K.exports.createPortal(i("button",{"data-testid":"loading",type:"button",title:"Click to cancel!",onClick:t,className:"b1dll0lj",children:e?i("div",{style:{width:`${e}%`},className:"dvnac7k"}):null}),r)}function T({error:t}){const{refresh:e}=ee();return R("section",{children:[i("h1",{children:"Error"}),i("pre",{children:t.stack}),i("button",{type:"button",onClick:e,children:"Refresh"})]})}function te(t){return new Promise(e=>{setTimeout(e,t)})}const ne=[{id:1,username:"user 1",description:"..."},{id:2,username:"user 2",description:"..."}];async function Oe(){return await te(3e3),ne}async function Se(t){if(await te(3e3),t>2)throw new Error("Not Found");return ne.find(e=>e.id===t)}function Ve(){const t=window.location.search.slice(1),e={component:()=>C(()=>import("./index.533aeee6.js"),["assets/index.533aeee6.js","assets/index.ebf4e2dd.css","assets/vendor.3d96c833.js"]),children:[{path:"/",component:()=>C(()=>import("./index.283f8fab.js"),["assets/index.283f8fab.js","assets/index.04ec1ac7.css","assets/vendor.3d96c833.js"])},{path:"/users",component:()=>C(()=>import("./index.b76a96d0.js"),["assets/index.b76a96d0.js","assets/index.e0d4e456.css","assets/vendor.3d96c833.js"]),data:Oe},{path:"/users/:id",component:()=>C(()=>import("./index.d2ccd496.js"),["assets/index.d2ccd496.js","assets/index.d2976a17.css","assets/vendor.3d96c833.js"]),data:({id:n})=>Se(+n)},{path:"/help",component:()=>C(()=>import("./index.1a3ba4a8.js"),["assets/index.1a3ba4a8.js","assets/index.ba0ba40f.css","assets/vendor.3d96c833.js"])},{path:"/about",component:()=>C(()=>import("./index.fb708890.js"),["assets/index.fb708890.js","assets/index.c2fbffe4.css","assets/vendor.3d96c833.js"])}]};return t==="hash"?R(Le,{routes:e,errorHandler:n=>i(T,{error:n}),children:[i(k,{}),i(H,{})]}):t==="memory"?R(Ie,{initialEntries:["/"],routes:e,errorHandler:n=>i(T,{error:n}),children:[i(k,{}),i(H,{})]}):R(je,{routes:e,baseUrl:"/native-router-react/".slice(0,-1),errorHandler:n=>i(T,{error:n}),children:[i(k,{}),i(H,{})]})}K.exports.render(i(Ve,{}),document.getElementById("root"));export{k as V,R as a,Te as b,i as j,ee as u};
